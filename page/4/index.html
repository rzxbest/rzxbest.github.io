<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.imder.top","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="随记">
<meta property="og:url" content="https://blog.imder.top/page/4/index.html">
<meta property="og:site_name" content="随记">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ren zheng xiao">
<meta property="article:tag" content="JAVA开发">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.imder.top/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>随记</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
   <script type="text/javascript" src="/js/fireworks.js"></script>
<link rel="alternate" href="/atom.xml" title="随记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">随记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记一记,所学,温故而知新</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ren zheng xiao"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Ren zheng xiao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2022/02/22/springcloudsentinel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/22/springcloudsentinel/" class="post-title-link" itemprop="url">sentinel</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-22 14:20:47" itemprop="dateCreated datePublished" datetime="2022-02-22T14:20:47+00:00">2022-02-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Springcloud/" itemprop="url" rel="index"><span itemprop="name">Springcloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="sentinel"><a href="#sentinel" class="headerlink" title="sentinel"></a>sentinel</h1><h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><ul>
<li>在pom文件中dependencyManagement里添加依赖<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2021.1&lt;/version&gt;</span><br><span class="line">    &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">    &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
<li>在pom文件中dependencies里添加依赖<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="抛出异常的方式定义资源"><a href="#抛出异常的方式定义资源" class="headerlink" title="抛出异常的方式定义资源"></a>抛出异常的方式定义资源</h2></li>
<li>定义流控规则<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void initRule()&#123;</span><br><span class="line">    FlowRule flowRule = new FlowRule();</span><br><span class="line">    flowRule.setResource(&quot;helloworld&quot;);</span><br><span class="line">    flowRule.setCount(2);</span><br><span class="line">    flowRule.setGrade(RuleConstant.FLOW_GRADE_QPS);</span><br><span class="line">    ArrayList arrayList = new ArrayList();</span><br><span class="line">    arrayList.add(flowRule);</span><br><span class="line">    FlowRuleManager.loadRules(arrayList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>判断是否限流<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> public  static  void helloworld()&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        Entry helloworld = SphU.entry(&quot;helloworld&quot;);</span><br><span class="line">        System.out.println(&quot;通过&quot;);</span><br><span class="line">    &#125;catch (Exception e)&#123;</span><br><span class="line">        System.out.println(&quot;限流&quot;);</span><br><span class="line">    &#125;finally &#123;</span><br><span class="line">        // SphU.entry(xxx) 需要与 entry.exit() 成对出现,否则会导致调用链记录异常</span><br><span class="line">        if (entry != null) &#123;</span><br><span class="line">            entry.exit();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="限流实现方式二-注解方式定义资源"><a href="#限流实现方式二-注解方式定义资源" class="headerlink" title="限流实现方式二: 注解方式定义资源"></a>限流实现方式二: 注解方式定义资源</h2></li>
<li>@SentinelResource(value = “资源名称”,blockHandler =”handleFlowQpsException” ,fallback =”queryOrderInfo2Fallback”)</li>
<li>blockHandler = “handleFlowQpsException”用来处理Sentinel 限流/熔断等错误；</li>
<li>fallback = “queryOrderInfo2Fallback”用来处理接口中业务代码所有异常(如业务代码异常、sentinel限流熔断异常等)</li>
</ul>
<p>在接口OrderQueryService中，使用注解实现订单查询接口的限流：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@SentinelResource(value = &quot;getOrderInfo&quot;, blockHandler = &quot;handleFlowQpsException&quot;,</span><br><span class="line">        fallback = &quot;queryOrderInfo2Fallback&quot;)</span><br><span class="line">public String queryOrderInfo2(String orderId) &#123;</span><br><span class="line"></span><br><span class="line">    // 模拟接口运行时抛出代码异常</span><br><span class="line">    if (&quot;000&quot;.equals(orderId)) &#123;</span><br><span class="line">        throw new RuntimeException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;获取订单信息:&quot; + orderId);</span><br><span class="line">    return &quot;return OrderInfo :&quot; + orderId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 订单查询接口抛出限流或降级时的处理逻辑</span><br><span class="line"> *</span><br><span class="line"> * 注意: 方法参数、返回值要与原函数保持一致</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public String handleFlowQpsException(String orderId, BlockException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    return &quot;handleFlowQpsException for queryOrderInfo2: &quot; + orderId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 订单查询接口运行时抛出的异常提供fallback处理</span><br><span class="line"> *</span><br><span class="line"> * 注意: 方法参数、返回值要与原函数保持一致</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public String queryOrderInfo2Fallback(String orderId, Throwable e) &#123;</span><br><span class="line">    return &quot;fallback queryOrderInfo2: &quot; + orderId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="控制台的使用"><a href="#控制台的使用" class="headerlink" title="控制台的使用"></a>控制台的使用</h2><h3 id="启动Sentinel控制台"><a href="#启动Sentinel控制台" class="headerlink" title="启动Sentinel控制台"></a>启动Sentinel控制台</h3><ul>
<li><p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/alibaba/Sentinel/releases">https://github.com/alibaba/Sentinel/releases</a></p>
</li>
<li><p>启动命令：java -Dserver.port=8080 \</p>
</li>
<li><p>Dcsp.sentinel.dashboard.server=localhost:8080 \</p>
</li>
<li><p>jar target/sentinel-dashboard.jar<br> <img src="/2022/02/22/springcloudsentinel/img.png" alt="img.png"></p>
<h3 id="客户端接入（Spring-Boot项目接入控制台"><a href="#客户端接入（Spring-Boot项目接入控制台" class="headerlink" title="客户端接入（Spring Boot项目接入控制台"></a>客户端接入（Spring Boot项目接入控制台</h3></li>
<li><p>添加依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;sentinel-transport-simple-http&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;sentinel.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>配置 JVM 启动参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dproject.name=sentinel-demo -Dcsp.sentinel.dashboard.server=127.0.0.1:8080 -Dcsp.sentinel.api.port=8719</span><br></pre></td></tr></table></figure>
<p><img src="/2022/02/22/springcloudsentinel/img_1.png" alt="img_1.png"></p>
</li>
<li><p>控制台页面<br><img src="/2022/02/22/springcloudsentinel/img_2.png" alt="img_2.png"></p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2022/02/21/%E6%8B%A6%E6%88%AA%E5%99%A8%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/%E6%8B%A6%E6%88%AA%E5%99%A8%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8/" class="post-title-link" itemprop="url">拦截器链式调用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-21 16:59:29" itemprop="dateCreated datePublished" datetime="2022-02-21T16:59:29+00:00">2022-02-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="拦截器链式调用"><a href="#拦截器链式调用" class="headerlink" title="拦截器链式调用"></a>拦截器链式调用</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul>
<li>声明一个接口（校验）</li>
<li>定义校验规则</li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ul>
<li>针对每个规则实现接口</li>
<li>每个规则有校验的先后顺序，继承order接口</li>
</ul>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><ul>
<li>写一个抽象类：把公共的校验规则写在抽象类</li>
</ul>
<h2 id="链类"><a href="#链类" class="headerlink" title="链类"></a>链类</h2><ul>
<li>创建一个规则链对象，依赖规则对象</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2022/02/21/springmvc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/springmvc/" class="post-title-link" itemprop="url">Springmvc之DispatcherServlet</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-21 14:59:29" itemprop="dateCreated datePublished" datetime="2022-02-21T14:59:29+00:00">2022-02-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Springmvc之DispatcherServlet"><a href="#Springmvc之DispatcherServlet" class="headerlink" title="Springmvc之DispatcherServlet"></a>Springmvc之DispatcherServlet</h1><h2 id="初始化图"><a href="#初始化图" class="headerlink" title="初始化图"></a>初始化图</h2><p><img src="/springmvc%E5%88%9D%E5%A7%8B%E5%8C%96.png" alt="springmvc初始化"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2022/02/18/spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/18/spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/" class="post-title-link" itemprop="url">Spring循环依赖</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-18 14:59:29" itemprop="dateCreated datePublished" datetime="2022-02-18T14:59:29+00:00">2022-02-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Spring循环依赖"><a href="#Spring循环依赖" class="headerlink" title="Spring循环依赖"></a>Spring循环依赖</h1><h2 id="循环依赖图"><a href="#循环依赖图" class="headerlink" title="循环依赖图"></a>循环依赖图</h2><p><img src="/2022/02/18/spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98.png" alt="spring循环依赖"></p>
<h2 id="aop创建proxy对象时机"><a href="#aop创建proxy对象时机" class="headerlink" title="aop创建proxy对象时机"></a>aop创建proxy对象时机</h2><ul>
<li>常规一点的就是在BeanFactory.initializeBean()方法里面调用初始化方法之后，调用applyBeanPostProcessorsAfterInitialization() –&gt; AbstractAutoProxyCreator.wrapIfNecessary()生成proxy对象。</li>
<li>还有就是在存在循环依赖的时候，在doCreateBean() –&gt; addSingletonFactory(beanName, () –&gt; getEarlyBeanReference(beanName, mbd, bean)); –&gt; 然后在getSingleton()的时候从三级缓存中取对象的时候，会调用getEarlyBeanReference() –&gt; AbstractAutoProxyCreator.wrapIfNecessary()生成proxy对象。</li>
</ul>
<h2 id="aop创建案例"><a href="#aop创建案例" class="headerlink" title="aop创建案例"></a>aop创建案例</h2><ul>
<li>第一种情况，Student是代理对象，但是getBean(“teacher”)。</li>
</ul>
<ol>
<li>创建Teacher bean</li>
<li>开始populateBean(“student”)</li>
<li>开始创建Student的bean实例</li>
<li>在创建完bean实例的之后也开始populateBean(“teacher”)</li>
<li>开始创建Teacher的bean实例 </li>
<li>这时候doGetBean(“teacher”)–&gt;getSingleton(“teacher”)的时候会从三级缓存中获取bean对象，直接返回。</li>
<li>Student继续下面步骤，即initializeBean()–&gt;applyBeanPostProcessorsAfterInitialization()开始为Student创建Proxy对象(因为Teacher是正常的singleton bean)</li>
<li>再返回到Teacher的创建，Teacher设置的就是Student的Proxy对象</li>
<li>然后Teacher继续调用initializeBean()完成初始化。</li>
</ol>
<ul>
<li>第二种情况，Student是代理对象，同时getBean(“student”)。</li>
</ul>
<ol>
<li>这种情况下就先开始创建Student对象的bean，</li>
<li>同样的开始populateBean(“teacher”)，</li>
<li>开始创建Teacher的bean，</li>
<li>创建完Teacher bean之后，接着开始populateBean(“student”)，</li>
<li>循环依赖开始创建student的bean， </li>
<li>那么这个时候这时候doGetBean(“student”)–&gt;getSingleton(“student”)的时候会从三级缓存中获取bean对象，</li>
<li>跟第一种情况不一样的是，Student是需要被AOP代理的，那么这时候从三级缓存中取出的是getEarlyBeanReference()方法返回的代理对象Proxy，</li>
<li>然后将这个proxy对象放到二级缓存earlySingletonObjects中。</li>
<li>后面Teacher populateBean(“student”)就拿到了Student的代理Proxy，完成Teacher的initializeBean()完成初始化， </li>
<li>然后回到创建student的bean创建，populateBean(“teacher”)设置好Teacher之后，</li>
<li>开始完成student的initializeBean()初始化，</li>
<li>这里applyBeanPostProcessorsAfterInitialization()–&gt;wrapIfNecessary()不会再创建代理对象，</li>
<li>因为缓存earlyProxyReferences里面已经存在student的proxy对象，这也就导致exposedObject = initializeBean(beanName, exposedObject, mbd)这个exposedObject不是代理对象proxy，而是真实对象，如果这样返回就有问题了，所以这里二级缓存的作用就体现出来了，在initializeBean()之后会再次调用getSingleton()去检查二级缓存，此时拿到earlySingletonReference是student对象的proxy对象，那么此时就将exposedObject从真实对象换成proxy代理对象，然后返回。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if (earlySingletonExposure) &#123;</span><br><span class="line">    //再次检查二级缓存的值</span><br><span class="line">    Object earlySingletonReference = getSingleton(beanName, false);</span><br><span class="line">    if (earlySingletonReference != null) &#123;</span><br><span class="line">         if (exposedObject == bean) &#123;</span><br><span class="line">        //将真实对象转换成代理Proxy对象</span><br><span class="line">        exposedObject = earlySingletonReference;</span><br><span class="line">        &#125;</span><br><span class="line">        。。。省略代码</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="processon地址"><a href="#processon地址" class="headerlink" title="processon地址"></a>processon地址</h2><a target="_blank" rel="noopener" href="https://www.processon.com/diagraming/620f41cbe0b34d5aaa947aec">https://www.processon.com/diagraming/620f41cbe0b34d5aaa947aec</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2021/12/08/java-object-header/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/08/java-object-header/" class="post-title-link" itemprop="url">JAVA 对象头情况分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-08 16:14:00" itemprop="dateCreated datePublished" datetime="2021-12-08T16:14:00+00:00">2021-12-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%AF%B9%E8%B1%A1/" itemprop="url" rel="index"><span itemprop="name">java对象</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="对象头情况分析"><a href="#对象头情况分析" class="headerlink" title="对象头情况分析"></a>对象头情况分析</h2><ul>
<li>32位系统</li>
<li>64位系统</li>
</ul>
<h2 id="32位系统"><a href="#32位系统" class="headerlink" title="32位系统"></a>32位系统</h2><table>
<tr>
<th rowspan="2">锁状态</th> <th colspan="2">25bit</th> <th rowspan="2">4bit</th> <th>1bit</th> <th>2bit</th>
</tr>
<tr>
 <th>23bit</th> <th >2bit</th> <th>是否偏向锁</th> <th>锁标志位</th>
</tr>
<tr>
 <td>无锁</td>  <td colspan="2">对象的hashcode</td> <td>分代年龄</td> <td>0</td> <td>01</td>
</tr>
<tr>
 <td>偏向锁</td>  <td>线程ID</td> <td>Epoch</td> <td>分代年龄</td>  <td>1</td> <td>01</td>
</tr>
<tr>
 <td>轻量级锁</td>  <td colspan="4">指向栈中的锁记录的指针</td> <td>00</td>
</tr>
<tr>
 <td>重量级锁</td>  <td colspan="4">指向重量级锁的指针</td> <td>10</td>
</tr>
<tr>
 <td>GC标记</td>  <td colspan="4">空</td> <td>11</td>
</tr>
</table>


<h2 id="64位系统"><a href="#64位系统" class="headerlink" title="64位系统"></a>64位系统</h2><table>
<tr>
<th >锁状态</th> <th colspan="4">61bit</th> <th >是否偏向锁 1bit</th> <th>锁标志 2bit</th>
</tr>
<tr>
 <td>无锁</td> <td>unused 25bit</td> <td >对象的hashcode 31bit</td> <td>unused 1bit </td> <td>分代年龄 4bit</td> <td>0</td> <td>01</td>
</tr>
<tr>
 <td>偏向锁</td>  <td>线程ID 54bit</td> <td>Epoch 2bit </td> <td>unused 1bit </td> <td>分代年龄 4bit</td>  <td>1</td> <td>01</td>
</tr>
<tr>
 <td>轻量级锁</td>  <td colspan="5">指向栈中的锁记录的指针</td> <td>00</td>
</tr>
<tr>
 <td>重量级锁</td>  <td colspan="5">指向重量级锁的指针</td> <td>10</td>
</tr>
<tr>
 <td>GC标记</td>  <td colspan="5">空</td> <td>11</td>
</tr>
</table>

<h2 id="jvm是如何使用锁和markword"><a href="#jvm是如何使用锁和markword" class="headerlink" title="jvm是如何使用锁和markword?"></a>jvm是如何使用锁和markword?</h2><ol>
<li>当对象没有被加锁，一个普通的对象，MarkWord记录对象的hashcode，锁标志位01，是否偏向锁0</li>
<li>当对象被当做同步锁并有一个线程A抢到锁时，锁标志位 01 偏向锁改成1，前23bit记录抢到锁的线程id,表示进入偏向状态</li>
<li>当线程A再次试图来获得锁时，JVM发现同步锁对象的标志位是01，是否偏向锁是1，也就是偏向状态，Mark Word中记录的线程id就是线程A自己的id，表示线程A已经获得了这个偏向锁，可以执行同步锁的代码</li>
<li>当线程B试图获得这个锁时，JVM发现同步锁处于偏向状态，但是Mark Word中的线程id记录的不是B，那么线程B会先用CAS操作试图获得锁，这里的获得锁操作是有可能成功的，因为线程A一般不会自动释放偏向锁。如果抢锁成功，就把Mark Word里的线程id改为线程B的id，代表线程B获得了这个偏向锁，可以执行同步锁代码。如果抢锁失败，则继续执行步骤5。</li>
<li>偏向锁状态抢锁失败，代表当前锁有一定的竞争，偏向锁将升级为轻量级锁。JVM会在当前线程的线程栈中开辟一块单独的空间，里面保存指向对象锁Mark Word的指针，同时在对象锁Mark Word中保存指向这片空间的指针。上述两个保存操作都是CAS操作，如果保存成功，代表线程抢到了同步锁，就把Mark Word中的锁标志位改成00，可以执行同步锁代码。如果保存失败，表示抢锁失败，竞争太激烈，继续执行步骤6。</li>
<li>轻量级锁抢锁失败，JVM会使用自旋锁，自旋锁不是一个锁状态，只是代表不断的重试，尝试抢锁。从JDK1.7开始，自旋锁默认启用，自旋次数由JVM决定。如果抢锁成功则执行同步锁代码，如果失败则继续执行步骤7。</li>
<li>自旋锁重试之后如果抢锁依然失败，同步锁会升级至重量级锁，锁标志位改为10。在这个状态下，未抢到锁的线程都会被阻塞。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2021/11/25/jvm-virtual/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/25/jvm-virtual/" class="post-title-link" itemprop="url">JAVA虚拟机</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-25 19:20:47" itemprop="dateCreated datePublished" datetime="2021-11-25T19:20:47+00:00">2021-11-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="JVM虚拟机"><a href="#JVM虚拟机" class="headerlink" title="JVM虚拟机"></a>JVM虚拟机</h1><p><img src="/2021/11/25/jvm-virtual/image-20211126094454822.png" alt="image-20211126094454822"></p>
<h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><ul>
<li>每开启一个线程，就开辟一块栈内存区域</li>
<li>栈帧：遇到一方法就新建一块栈帧放入栈中</li>
<li>方法执行完，对应栈帧出栈销毁</li>
</ul>
<h4 id="栈帧"><a href="#栈帧" class="headerlink" title="栈帧"></a>栈帧</h4><ul>
<li>局部变量表 ：存局部变量</li>
<li>操作数栈 ： 做运算</li>
<li>动态链接 ：方法入口地址 符号引用转为入口地址</li>
<li>方法出口</li>
</ul>
<p><img src="/2021/11/25/jvm-virtual/image-20211126094254239.png" alt="image-20211126094254239"></p>
<h4 id="反汇编查看字节码文件"><a href="#反汇编查看字节码文件" class="headerlink" title="反汇编查看字节码文件"></a>反汇编查看字节码文件</h4><p>javap -c ***.class</p>
<h4 id="单个栈空间大小设置参数"><a href="#单个栈空间大小设置参数" class="headerlink" title="单个栈空间大小设置参数"></a>单个栈空间大小设置参数</h4><p>-Xss128k （默认1m）</p>
<p>栈空间满了会出现StackOverFlowError，调用链过长可能导致此位置，或者递归调用</p>
<h2 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h2><p><img src="/2021/11/25/jvm-virtual/image-20211126094600649.png" alt="image-20211126094600649"></p>
<p>堆参数设置：</p>
<ul>
<li>-Xms  初始堆大小 例：-Xms256m</li>
<li>-Xmx  最大堆大小 例：-Xms256m</li>
<li>-Xmn  新生代大小     例：-Xmn1m</li>
</ul>
<h2 id="方法区-元空间"><a href="#方法区-元空间" class="headerlink" title="方法区(元空间)"></a>方法区(元空间)</h2><p>主要存常量，静态变量，类元信息</p>
<p>jdk1.8类元数据放到了<strong>本地内存</strong>中，将<strong>常量池</strong>和<strong>静态变量</strong>放到了Java<strong>堆</strong>， jdk1.7 及以前存储堆中在持久代</p>
<p>方法区设置参数1.8</p>
<ul>
<li>-XX:MetaspaceSize:</li>
<li>-XX:MetaspaceSize:</li>
</ul>
<h2 id="程序计数器"><a href="#程序计数器" class="headerlink" title="程序计数器"></a>程序计数器</h2><p>存储正在执行的语句的行号（地址），线程私有，当语句执行完成，字节码执行引擎对程序计数器进行修改</p>
<h2 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h2><h4 id="gc类型"><a href="#gc类型" class="headerlink" title="gc类型"></a>gc类型</h4><ul>
<li>full gc 回收年轻代、老年代、方法区无引用对象</li>
<li>minor gc 回收eden survivor区无引用对象</li>
</ul>
<p>注意：gc回收过程中都会 stop the world (STW) 如果回收后仍没有空间放对象，OutOfMemoryError</p>
<p>minor gc 回收 eden区 from区 将存活对象移入to区</p>
<p>minor gc 回收eden区 to 区，将存活对象移入from区</p>
<h4 id="逃逸分析"><a href="#逃逸分析" class="headerlink" title="逃逸分析"></a>逃逸分析</h4><h5 id="jvm运行模式（java命令运行java类）"><a href="#jvm运行模式（java命令运行java类）" class="headerlink" title="jvm运行模式（java命令运行java类）"></a>jvm运行模式（java命令运行java类）</h5><ol>
<li><p>解释模式：执行一行jvm字节码编译一行机器码执行 ，启动快执行慢</p>
</li>
<li><p>编译模式：一次性编译成机器码一次性执行  启动慢 执行快</p>
</li>
<li><p>混合模式：使用解释模式，热点代码使用编译模式</p>
</li>
</ol>
<h5 id="逃逸分析参数"><a href="#逃逸分析参数" class="headerlink" title="逃逸分析参数"></a>逃逸分析参数</h5><p>开启：-XX:+DoEscapeAnalysis</p>
<p>关闭：-XX:-DoEscapeAnalysis</p>
<p>jdk1.8默认开启</p>
<h5 id="逃逸分析说明"><a href="#逃逸分析说明" class="headerlink" title="逃逸分析说明"></a>逃逸分析说明</h5><p>如果一个方法中的对象在方法结束时，这个对象就可以被回收，jvm会将这个对象分配栈帧里，如果栈空间不够，分配在堆里，栈帧弹出就回收，不需要等待内存满触发GC</p>
<h4 id="垃圾回收"><a href="#垃圾回收" class="headerlink" title="垃圾回收"></a>垃圾回收</h4><ol>
<li><p>对象优先分配eden区</p>
</li>
<li><p>大对象可以直接进入老年代，避免在年轻代来回复制，大对象复制比较耗时</p>
</li>
<li><p>minor gc后survivor区放不下的对象直接进入老年代</p>
</li>
<li><p>动态年龄判断 ：年龄1+…年龄n &gt; survivor区大小50% 那么年龄大于n的对象直接进入老年代</p>
</li>
<li><p>老年代空间担保机制 -XX:-HandlePromotionFailure 1.8默认设置</p>
<p><img src="/2021/11/25/jvm-virtual/image-20211126100653589.png" alt="image-20211126100653589"></p>
</li>
</ol>
<h4 id="如何判断对象可以被回收？"><a href="#如何判断对象可以被回收？" class="headerlink" title="如何判断对象可以被回收？"></a>如何判断对象可以被回收？</h4><ul>
<li><p>引用计数器：计数为0 可以回收，存在问题就是循环依赖，A对象一属性依赖B B对象一属性依赖A</p>
</li>
<li><p>可达性分析算法：GCRoot根，遍历GCroot根</p>
<ul>
<li>线程栈局部变量</li>
<li>静态变量</li>
<li>本地方法栈变量</li>
</ul>
</li>
</ul>
<h4 id="如何判断一个类时无用类？"><a href="#如何判断一个类时无用类？" class="headerlink" title="如何判断一个类时无用类？"></a>如何判断一个类时无用类？</h4><ul>
<li>类的所有实例被回收</li>
<li>加载该类的classloader被回收</li>
<li>该类对应的java.lang.class对象任何地方没有被引用，Class..forName()</li>
</ul>
<h4 id="当对象第一次被标记为垃圾对象，如何拯救对象变为正常对象？"><a href="#当对象第一次被标记为垃圾对象，如何拯救对象变为正常对象？" class="headerlink" title="当对象第一次被标记为垃圾对象，如何拯救对象变为正常对象？"></a>当对象第一次被标记为垃圾对象，如何拯救对象变为正常对象？</h4><p>重写finalize方法，重新建立引用关系，第二次标记回调用该对象的finalize方法</p>
<h4 id="垃圾回收算法"><a href="#垃圾回收算法" class="headerlink" title="垃圾回收算法"></a>垃圾回收算法</h4><ol>
<li>标记清除：标记需回收的对象，然后一个一个清理<ul>
<li>效率较低</li>
<li>空间利用率低，清除后产生不连续碎片</li>
</ul>
</li>
<li>复制算法：内存分为两块，分配对象使用其中一块，垃圾回收时，将存活对象复制到另一块，剩余一次性清理掉<ul>
<li>效率快</li>
<li>空间利用率低</li>
<li>一般来说年轻代使用复制算法</li>
</ul>
</li>
<li>标记整理算法：标记出垃圾对象，将存活对象向一端移动，然后清理端边界以外的内存</li>
<li>分代收集算法：年轻代和老年代使用不同垃圾收集算法</li>
</ol>
<h4 id="垃圾收集器"><a href="#垃圾收集器" class="headerlink" title="垃圾收集器"></a>垃圾收集器</h4><h5 id="Serial收集器"><a href="#Serial收集器" class="headerlink" title="Serial收集器"></a>Serial收集器</h5><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">使用参数</th>
<th align="center">算法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">年轻代</td>
<td align="center">-XX:+UseSerialGC</td>
<td align="center">复制算法</td>
</tr>
<tr>
<td align="center">老年代</td>
<td align="center">-XX:+UseSerialOldGC</td>
<td align="center">标记整理算法</td>
</tr>
</tbody></table>
<p>说明：单线程收集，收集时必须暂停应用程序线程 stw</p>
<p>优点：</p>
<ul>
<li>简单高效</li>
</ul>
<p>缺点：</p>
<ul>
<li>对多核cpu来说 效率不高</li>
</ul>
<h5 id="ParNew收集器"><a href="#ParNew收集器" class="headerlink" title="ParNew收集器"></a>ParNew收集器</h5><p>说明：是Serial收集器的多线程版本</p>
<p>XX:+UseParNewGC，打开该开关后，使用ParNew(年轻代)+Serial Old(老年代)组合进行GC。另外，ParNew是CMS收集器的默认年轻代收集器。</p>
<p>老年代使用标记整理算法，年轻代是复制算法</p>
<p>ParNew用于垃圾回收的线程可用参数**-XX:ParallelGCThreads=n**进行配置,建议n与主机逻辑cpu数一致。</p>
<h4 id="ParallelScavenge收集器"><a href="#ParallelScavenge收集器" class="headerlink" title="ParallelScavenge收集器"></a>ParallelScavenge收集器</h4><p>是内存大于2G，2个cpu下的默认收集器</p>
<p>说明：关注吞吐量，关注用户线程的停顿时间</p>
<p>所谓吞吐量，就是cpu用于执行用户代码时间与cpu消耗时间的比值</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">使用参数</th>
<th align="center">算法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">年轻代</td>
<td align="center">-XX:+UseParallelGC</td>
<td align="center">复制算法</td>
</tr>
<tr>
<td align="center">老年代</td>
<td align="center">-XX:+UseParallelOldGC</td>
<td align="center">标记整理算法</td>
</tr>
</tbody></table>
<h4 id="CMS收集器"><a href="#CMS收集器" class="headerlink" title="CMS收集器"></a>CMS收集器</h4><p>相关参数：</p>
<ul>
<li>-XX:+UseConcMarkSweepGC 启动cms</li>
<li>-XX:ConcGCThreads 并发GC的线程数</li>
<li>-XX:+UseCMSCompactAtFullCollection fullgc之后做压缩整理</li>
<li>-XX:+CMSFullGCsBeforeCompaction 几次fullgc做一次压缩，默认是0</li>
<li>-XX:CMSInitiatingOccupancyFraction 老年代使用达到该比例出发fullgc 默认是92，百分比</li>
<li>-XX:+UseCMSInitiatingOccupancyOnly 只使用设定的回收阈值(- XX:CMSInitiatingOccupancyFraction设定的值) 如果没有指定这个值，只有第一次使用指定值，后续自动调整</li>
<li>-XX:+CMSScavengeBeforeRemark  在fullgc之前先minor gc一次，目的在于减少老年代对年轻代的引用，降低cms gc 标记阶段开销，一般cms的gc耗时80%都在remark阶段</li>
</ul>
<p>cms收集器步骤：</p>
<ol>
<li>初始标记：STW 记录gcRoot根直接引用的对象 速度很快</li>
<li>并发标记：NO STW 全链路标记gcRoot ，耗时长</li>
<li>重新标记：STW 修正并发标记应用程序运行导致标记产生变动的对象，比初始标记稍微耗时长一点</li>
<li>并发清理：NO STW 清理</li>
</ol>
<p>cms收集器的缺陷：</p>
<ul>
<li><p>产生浮动垃圾，并发清理又产生垃圾</p>
</li>
<li><p>cpu资源抢占</p>
</li>
<li><p>使用标记清除算法，产生碎片</p>
</li>
<li><p>在执行gc过程中，一边标记/回收，一边产生新的垃圾，可能导致再一次的fullgc ,此时会进入stw,使用serial收集器收集</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2021/11/25/jvm_class_child_system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/25/jvm_class_child_system/" class="post-title-link" itemprop="url">JVM类加载子系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-25 14:59:29" itemprop="dateCreated datePublished" datetime="2021-11-25T14:59:29+00:00">2021-11-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="类加载流程"><a href="#类加载流程" class="headerlink" title="类加载流程"></a>类加载流程</h2><ol>
<li><p>加载：从硬盘读取class文件</p>
</li>
<li><p>验证：验证字节码准确性</p>
</li>
<li><p>准备：类静态变量赋值，默认值基础类型0，false等等，对象类型null</p>
</li>
<li><p>解析：将符号引用替换为直接引用</p>
<ol>
<li>静态链接：main方法替换为指向数据所存内存区域的指针</li>
<li>动态链接：运行期间将符号引用替换为指向内存区域的指针</li>
</ol>
</li>
<li><p>初始化：类的静态变量初始化为制定的值，执行静态代码块</p>
</li>
</ol>
<h2 id="类加载器与双亲委派机制"><a href="#类加载器与双亲委派机制" class="headerlink" title="类加载器与双亲委派机制"></a>类加载器与双亲委派机制</h2><ul>
<li>启动类加载器：加载jre/lib下的核心类库</li>
<li>扩展类加载器：加载lib/ext 下的jar包</li>
<li>应用程序加载器：加载自己写的类</li>
<li>自定义类加载器：加载自定义路径的类</li>
</ul>
<p><strong>打印 启动类加载器 打印出null？原因：c语言实现，java里找不到打印null</strong></p>
<h3 id="自定义类加载器"><a href="#自定义类加载器" class="headerlink" title="自定义类加载器"></a>自定义类加载器</h3><ol>
<li>重写loadClass方法</li>
<li>重写findClass方法</li>
</ol>
<p>ClassLoader 抽象类 未实现findClass方法</p>
<ol>
<li>​    loadClass方法<ul>
<li>先从父加载器加载</li>
<li>若父加载器加载不到 ,用bootstrap加载器加载（c语言实现，java调用native方法）</li>
<li>若经过上述两步还加载不到则调用自己findClass方法</li>
</ul>
</li>
<li>defineClass方法：将二进制字节码文件加载成class对象</li>
</ol>
<h3 id="双亲委派机制"><a href="#双亲委派机制" class="headerlink" title="双亲委派机制"></a>双亲委派机制</h3><p><img src="/2021/11/25/jvm_class_child_system/shuangqin.png" alt="双亲委派模型"></p>
<h4 id="为什么使用双亲委派机制？"><a href="#为什么使用双亲委派机制？" class="headerlink" title="为什么使用双亲委派机制？"></a>为什么使用双亲委派机制？</h4><ul>
<li>沙箱安全机制，例如自己写java.lang.String 不会被应用程序加载器（自定义类加载器）加载，防止核心类被篡改</li>
<li>避免类的重复加载</li>
</ul>
<h4 id="如何打印程序加载类信息？"><a href="#如何打印程序加载类信息？" class="headerlink" title="如何打印程序加载类信息？"></a>如何打印程序加载类信息？</h4><p> -verbose:class</p>
<h4 id="A-a-null，请问是否加载字节码？"><a href="#A-a-null，请问是否加载字节码？" class="headerlink" title="A a = null，请问是否加载字节码？"></a>A a = null，请问是否加载字节码？</h4><p>不加载字节码</p>
<h4 id="打破双亲委派？"><a href="#打破双亲委派？" class="headerlink" title="打破双亲委派？"></a>打破双亲委派？</h4><p>tomcat类加载打破</p>
<ul>
<li>一个容器部署多个应用程序，不同的程序依赖同一类库的版本不同</li>
<li>同类库相同可以共存</li>
<li>tomcat容器有自己的依赖类库，不能与应用程序类库混淆</li>
<li>支持jsp的修改</li>
</ul>
<p><img src="/2021/11/25/jvm_class_child_system/tomcat.png" alt="tomcat"></p>
<p>注意：</p>
<ul>
<li>每个war包都有一个webAppClassLoader加载</li>
<li>   早期tomcat有common、server、 shared目录 分别对应CommonClassLoader,CatalinaClassLoader,SharedClassLoader</li>
</ul>
<h3 id="类加载器如何为parent赋值？"><a href="#类加载器如何为parent赋值？" class="headerlink" title="类加载器如何为parent赋值？"></a>类加载器如何为parent赋值？</h3><p>程序启动时调用jvm.dll加载启动类加载器，由启动类加载其他类加载器并对parent进行赋值</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.imder.top/2021/11/24/java_memory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ren zheng xiao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/24/java_memory/" class="post-title-link" itemprop="url">JAVA 对象占内存情况分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-24 16:14:00" itemprop="dateCreated datePublished" datetime="2021-11-24T16:14:00+00:00">2021-11-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-03-28 16:43:20" itemprop="dateModified" datetime="2024-03-28T16:43:20+00:00">2024-03-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%AF%B9%E8%B1%A1/" itemprop="url" rel="index"><span itemprop="name">java对象</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="对象组成结构"><a href="#对象组成结构" class="headerlink" title="对象组成结构"></a>对象组成结构</h2><ul>
<li>对象头</li>
<li>对象实例数据</li>
</ul>
<h2 id="对象头"><a href="#对象头" class="headerlink" title="对象头"></a>对象头</h2><table>
<thead>
<tr>
<th align="center">对象头</th>
<th align="center">32bit系统</th>
<th align="center">64bit系统</th>
</tr>
</thead>
<tbody><tr>
<td align="center">_mark</td>
<td align="center">4byte</td>
<td align="center">8byte</td>
</tr>
<tr>
<td align="center">_klass</td>
<td align="center">4byte</td>
<td align="center">8byte(64位指针压缩4byte)</td>
</tr>
<tr>
<td align="center">_length</td>
<td align="center">4byte</td>
<td align="center">4byte</td>
</tr>
</tbody></table>
<p>64位系统在内存小于32G情况下默认开启指针压缩；在开启指针压缩时，64位系统 _klass 占用4byte</p>
<ul>
<li>注意：<ul>
<li>对象头中_length 只有数组才有此字段</li>
<li>klass类指针，指向类元数据的指针</li>
</ul>
</li>
</ul>
<h2 id="对象实例数据"><a href="#对象实例数据" class="headerlink" title="对象实例数据"></a>对象实例数据</h2><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">占用空间大小 32位系统</th>
<th align="center">占用空间大小 64位系统</th>
</tr>
</thead>
<tbody><tr>
<td align="center">long/double</td>
<td align="center">8byte</td>
<td align="center">8byte</td>
</tr>
<tr>
<td align="center">int/float</td>
<td align="center">4byte</td>
<td align="center">4byte</td>
</tr>
<tr>
<td align="center">short/char</td>
<td align="center">2byte</td>
<td align="center">2byte</td>
</tr>
<tr>
<td align="center">boolean/byte</td>
<td align="center">1byte</td>
<td align="center">1byte</td>
</tr>
<tr>
<td align="center">reference</td>
<td align="center">4byte</td>
<td align="center">8byte(64位指针压缩4byte)</td>
</tr>
</tbody></table>
<p>对象实例数据对齐，对象首地址必须为该对象占用空间的整数倍 </p>
<ul>
<li>例如 int类型实例的首地址 %4 =0 如果不满足，则需要对齐填空padding 使其满足</li>
<li>对象实例数据在内存排序规则： long/double，int/float,short/char,boolean/byte,reference</li>
</ul>
<p><strong>对象对齐</strong>：(对象尾 + padding) % 8 = 0 ; 0 &lt; padding &lt; 8</p>
<h2 id="查看普通java对象的内部布局工具"><a href="#查看普通java对象的内部布局工具" class="headerlink" title="查看普通java对象的内部布局工具"></a>查看普通java对象的内部布局工具</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.openjdk.jol&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;jol-core&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;0.9&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>对象大小测试 java代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import org.openjdk.jol.info.ClassLayout;</span><br><span class="line">public class Main   &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(ClassLayout.parseInstance(new Object()).toPrintable());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>开启指针压缩 -XX:+UseCompressedOops</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object object internals:</span><br><span class="line"> OFFSET  SIZE   TYPE DESCRIPTION                               VALUE</span><br><span class="line">      0     4        (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">      4     4        (object header)                           00 00 00 00 (00000000 00000000 00000000 00000000) (0)</span><br><span class="line">      8     4        (object header)                           28 0f 00 00 (00101000 00001111 00000000 00000000) (3880)</span><br><span class="line">     12     4        (loss due to the next object alignment)</span><br><span class="line">Instance size: 16 bytes</span><br><span class="line">Space losses: 0 bytes internal + 4 bytes external = 4 bytes total</span><br></pre></td></tr></table></figure>
<p>由此可见 上述第三个 object header 为kclass指针，占用空间4bytes</p>
<p>关闭指针压缩-XX:-UseCompressedOops </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object object internals:</span><br><span class="line"> OFFSET  SIZE   TYPE DESCRIPTION                               VALUE</span><br><span class="line">      0     4        (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">      4     4        (object header)                           00 00 00 00 (00000000 00000000 00000000 00000000) (0)</span><br><span class="line">      8     4        (object header)                           00 1c 1c 12 (00000000 00011100 00011100 00010010) (303832064)</span><br><span class="line">     12     4        (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">Instance size: 16 bytes</span><br><span class="line">Space losses: 0 bytes internal + 0 bytes external = 0 bytes total</span><br></pre></td></tr></table></figure>
<p>由此可见，上述第三个第四个objectheader 为Klass指针，占用空间8bytes</p>
<p>数组对象测试 java代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import org.openjdk.jol.info.ClassLayout;</span><br><span class="line">public class Main   &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(ClassLayout.parseInstance(new Object[10]).toPrintable());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指针压缩情况下输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Ljava.lang.Object; object internals:</span><br><span class="line"> OFFSET  SIZE               TYPE DESCRIPTION                               VALUE</span><br><span class="line">      0     4                    (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">      4     4                    (object header)                           00 00 00 00 (00000000 00000000 00000000 00000000) (0)</span><br><span class="line">      8     4                    (object header)                           60 1a 01 00 (01100000 00011010 00000001 00000000) (72288)</span><br><span class="line">     12     4                    (object header)                           0a 00 00 00 (00001010 00000000 00000000 00000000) (10)</span><br><span class="line">     16    40   java.lang.Object Object;.&lt;elements&gt;                        N/A</span><br><span class="line">Instance size: 56 bytes</span><br><span class="line">Space losses: 0 bytes internal + 0 bytes external = 0 bytes total</span><br></pre></td></tr></table></figure>
<p>由此可见 第四个header为数组长度，同时reference类型占用4bytes</p>
<p>关闭指针压缩情况下输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Ljava.lang.Object; object internals:</span><br><span class="line"> OFFSET  SIZE               TYPE DESCRIPTION                               VALUE</span><br><span class="line">      0     4                    (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">      4     4                    (object header)                           00 00 00 00 (00000000 00000000 00000000 00000000) (0)</span><br><span class="line">      8     4                    (object header)                           d8 9c 3a 16 (11011000 10011100 00111010 00010110) (372939992)</span><br><span class="line">     12     4                    (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)</span><br><span class="line">     16     4                    (object header)                           0a 00 00 00 (00001010 00000000 00000000 00000000) (10)</span><br><span class="line">     20     4                    (alignment/padding gap)                  </span><br><span class="line">     24    80   java.lang.Object Object;.&lt;elements&gt;                        N/A</span><br><span class="line">Instance size: 104 bytes</span><br><span class="line">Space losses: 4 bytes internal + 0 bytes external = 4 bytes total</span><br></pre></td></tr></table></figure>
<p>由此可见，第五个为header为数组长度，同时reference类型占用8bytes</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">苏ICP备14022081号-4 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ren zheng xiao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
